<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Center | The Engine Room</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Oswald:wght@400;500;700&display=swap"
        rel="stylesheet">
</head>

<body style="overflow: hidden; display: none;" id="dashboard-body"> <!-- Cloaked by default -->
    <header id="main-header">
        <div class="container" style="max-width: 1600px;"> <!-- Wider for dashboard -->
            <div class="logo"><a href="index.html">THE <span class="accent">ENGINE</span> ROOM</a></div>
            <nav style="gap: 1rem;">
                <!-- Toolbar -->
                <div style="display: flex; gap: 10px; margin-right: 20px;">
                    <input type="text" id="dashboard-search" placeholder="Search applications..."
                        style="padding: 8px; border-radius: 4px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.1); color: white;">
                    <button id="export-btn" class="btn btn-outline" style="padding: 8px 15px; font-size: 0.8rem;">Export
                        CSV</button>
                </div>

                <span class="text-muted"
                    style="margin-right: 20px; border-left: 1px solid var(--glass-border); padding-left: 20px;">COMMAND
                    CENTER</span>
                <button id="settings-btn" class="btn btn-outline"
                    style="padding: 5px 10px; border: none; display: flex; align-items: center;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
                <div style="width: 1px; height: 20px; background: var(--glass-border); margin: 0 10px;"></div>
                <a href="#" id="logout-btn" class="btn btn-outline"
                    style="padding: 5px 15px; font-size: 0.8rem;">Logout</a>
            </nav>
        </div>
    </header>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h2>System Settings</h2>
                <button class="close-modal" id="close-settings">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4 class="accent">AI Configuration</h4>
                    <p class="text-muted" style="font-size: 0.9rem; margin-bottom: 1rem;">
                        Configure the Google Gemini integration.
                    </p>
                    <label style="display: block; margin-bottom: 5px; color: white;">API Key</label>
                    <input type="password" id="api-key-input" class="note-input" style="min-height: 40px;"
                        placeholder="AIzbSy...">

                    <label style="display: block; margin-bottom: 5px; margin-top: 15px; color: white;">AI Model</label>
                    <input type="text" id="api-model-input" class="note-input" style="min-height: 40px;"
                        placeholder="gemini-1.5-flash">

                    <button id="test-connection-btn" class="btn btn-outline"
                        style="width: 100%; margin-top: 15px; border-style: dashed;">Test Connection</button>

                    <button id="test-connection-btn" class="btn btn-outline"
                        style="width: 100%; margin-top: 15px; border-style: dashed;">Test Connection</button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings-btn" class="btn btn-primary" style="width: 100%;">Save Configuration</button>
            </div>
        </div>
    </div>

    <main style="padding-top: 100px; height: 100vh; display: flex; flex-direction: column;">
        <div class="container" style="max-width: 1600px; height: 100%;">

            <!-- Analytics Bar -->
            <div class="stats-bar">
                <div class="stat-card">
                    <span class="label">Total Applications</span>
                    <span class="value" id="stat-total">0</span>
                    <span class="trend">+12% this week</span>
                </div>
                <!-- Added Hover Effect Class via JS later or CSS -->
                <div class="stat-card">
                    <span class="label">Pending Review</span>
                    <span class="value" id="stat-pending" style="color: var(--primary);">0</span>
                </div>
                <div class="stat-card">
                    <span class="label">Acceptance Rate</span>
                    <span class="value" id="stat-rate">0%</span>
                </div>
                <div class="stat-card">
                    <span class="label">Est. Pipeline Value</span>
                    <span class="value" id="stat-pipeline">$0</span>
                </div>
            </div>

            <!-- Kanban Board -->
            <div class="kanban-board">
                <!-- Columns injected by JS -->
            </div>

        </div>
    </main>

    <!-- Detailed Modal -->
    <div class="modal-overlay" id="app-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Application Details</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="grid-2" style="margin-bottom: 2rem;">
                    <div>
                        <h4 class="accent">Founder Profile</h4>
                        <p id="modal-founder" class="text-white">...</p>
                        <p id="modal-contact" class="text-muted">...</p>
                    </div>
                    <div>
                        <h4 class="accent">Business Snapshot</h4>
                        <p id="modal-business" class="text-white">...</p>
                        <span id="modal-stage" class="tag"
                            style="background: var(--primary); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem;">...</span>
                    </div>
                </div>

                <!-- AI Analyst Section -->
                <div class="ai-section"
                    style="background: linear-gradient(135deg, rgba(255, 77, 0, 0.1), rgba(0,0,0,0)); border: 1px solid var(--primary); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; position: relative; overflow: hidden;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h4 style="margin: 0; color: var(--primary); display: flex; align-items: center; gap: 10px;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M12 2a10 10 0 1 0 10 10H12V2z"></path>
                                <path d="M12 2a10 10 0 0 1 10 10V2z"></path>
                                <path d="M2 12a10 10 0 0 0 10 10v-10H2z"></path>
                            </svg>
                            AI ANALYST
                        </h4>
                        <button id="ai-generate-btn" class="btn btn-outline"
                            style="padding: 5px 15px; font-size: 0.8rem;">Generate Report</button>
                    </div>

                    <div id="ai-content" style="display: none;">
                        <div class="grid-2">
                            <div>
                                <h5 class="text-muted" style="font-size: 0.8rem; text-transform: uppercase;">FIT SCORE
                                </h5>
                                <div class="score-display"
                                    style="font-size: 2.5rem; font-weight: 700; color: white; margin: 10px 0;">
                                    <span id="ai-score">0</span>%
                                </div>
                                <div id="ai-verdict" style="color: var(--primary); font-weight: 600;">...</div>
                            </div>
                            <div>
                                <h5 class="text-muted" style="font-size: 0.8rem; text-transform: uppercase;">EXECUTIVE
                                    SUMMARY</h5>
                                <p id="ai-summary" class="typing-text"
                                    style="font-size: 0.9rem; color: #ddd; line-height: 1.5;">...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-section">
                    <h4>The Pitch</h4>
                    <p id="modal-pitch"
                        style="font-style: italic; background: rgba(255,255,255,0.05); padding: 1rem; border-left: 2px solid var(--primary);">
                        ...</p>
                </div>

                <div class="modal-section">
                    <h4>Deep Dive</h4>
                    <div id="modal-answers">
                        <!-- Q&A Injected -->
                    </div>
                </div>

                <div class="modal-section" style="border-top: 1px solid var(--glass-border); padding-top: 1rem;">
                    <h4>Admin Notes</h4>
                    <textarea id="modal-notes" class="note-input" placeholder="Enter internal notes here..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <select id="modal-status-select" style="width: auto;">
                    <option value="New">Inbox</option>
                    <option value="Review">In Review</option>
                    <option value="Interview">Interview</option>
                    <option value="Accepted">Accepted</option>
                    <option value="Archived">Archived</option>
                </select>
                <button id="modal-save-btn" class="btn btn-primary">Save & Close</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 3000;"></div>

    <!-- Firebase SDKs (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script src="js/app.js"></script>
    <!-- Inline check removed, handled by anti-flash in app.js -->
</body>

</html>